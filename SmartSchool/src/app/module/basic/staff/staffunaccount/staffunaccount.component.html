<div class="td-search-container">
  <td-search-box fxFlex="grow" backIcon="search" placeholder="搜索" [showUnderline]="true" [alwaysVisible]="true" (clear)="searchInputTerm = ''" (search)="handleSearch($event)">
  </td-search-box>
  <md-select placeholder="匹配类型" [(ngModel)]="foodValue" name="foodValue">
    <md-option *ngFor="let food of foods" [value]="food.value">
    {{ food.viewValue }}
    </md-option>
  </md-select>
  <button md-icon-button [mdMenuTriggerFor]="topMenu"><md-icon>more_vert</md-icon></button>
  <md-menu #topMenu="mdMenu">
    <a  md-menu-item (click)="openDialog({func:'add'})">
      <md-icon>add</md-icon>
      <span>新增</span>
    </a>
    <a  md-menu-item (click)="openDialog({func:'edit'})">
      <md-icon>edit</md-icon>
      <span>修改</span>
    </a>
    <a  md-menu-item (click)="delete()">
      <md-icon>delete</md-icon>
      <span>删除</span>
    </a>
    <a  md-menu-item (click)="createAccount()">
      <md-icon>file_upload</md-icon>
      <span>批量生成用户</span>
    </a>
    <a  md-menu-item (click)="resetPassword()">
      <md-icon>file_upload</md-icon>
      <span>批量重置密码</span>
    </a>
    <a  md-menu-item (click)="createAdmin()">
      <md-icon>file_download</md-icon>
      <span>生成管理员</span>
    </a>
  </md-menu>
</div>
<div class="divider"></div>
<div fxLayout="row" fxLayoutAlign="start start">
  <div class="tree">
      <tree-root [nodes]="nodes">
          <ng-template #treeNodeTemplate let-node let-index="index">
            <span *ngIf="node.data.id.indexOf('a_') > -1">{{ node.data.name }}</span>
            <span (click)="searchByDepartment(node.data.id)" *ngIf="node.data.id.indexOf('g_') > -1">{{ node.data.name }}</span>
            <!-- <button md-button (click)="searchByDepartment(node.data.id)">{{ node.data.name }}</button> -->
          </ng-template>
      </tree-root>
    </div>
  <div fxFlex="grow" fxLayout="column">
    <td-data-table
      #dataTable
      [data]="basicData"
      [columns]="columns"
      [selectable]="true"
      [multiple]="true"
      [(ngModel)]="selectedRows"
      (rowSelect)="selectEvent($event)"
      >
    </td-data-table>
    <td-paging-bar 
        #pagingBar 
        [firstLast]="true" 
        [pageSizeAll]="false" 
        [pageSizes]="[10,20,50]"
        pageLinkCount="5" 
        [initialPage]="1" 
        [pageSize]="pageSize" 
        [total]="totalCount" 
        (change)="change($event)">
        <span td-paging-bar-label>每页:</span>
        {{pagingBar.range}} <span>of {{pagingBar.total}}</span>
    </td-paging-bar> 
  </div>
  
</div>
