<md-progress-bar *ngIf="uploading" mode="indeterminate"></md-progress-bar>
<h2 md-dialog-title>新增学校</h2>
<md-dialog-content>
	<td-message label="提示" sublabel="请先上传文件" color="primary" icon="warning"></td-message>
	<form #addForm="ngForm" fxLayout="row" fxLayoutAlign="space-around start" fxLayoutWrap>
		
			<md-input-container fxFlex="100">
		      <input mdInput placeholder="资源名称" required [(ngModel)]="model.name" name="name" >
		    </md-input-container>
		    
		    <md-select placeholder="资源类型" required fxFlex="50" [(ngModel)]="model.typeId" name="format" >
				<md-option *ngFor="let type of typelist; let i = index" [value]="type.uuid" >
					{{ type.name }}
				</md-option>
			</md-select>
			<md-select placeholder="资源归属" required fxFlex="50" [(ngModel)]="model.visibility" name="visibility" [disabled]="status == 'check'">
				<md-option *ngFor="let primary of primarylist; let i = index" [value]="primary.value">
					{{ primary.viewValue }}
				</md-option>
			</md-select>
			<md-select placeholder="资源年级" required fxFlex="50" [(ngModel)]="model.stagesId" name="stagesId" >
				<md-option *ngFor="let grade of gradelist; let i = index" [value]="grade.id">
					{{ grade.gradeName }}
				</md-option>
			</md-select>
			<md-select placeholder="资源学科" required fxFlex="50" [(ngModel)]="model.courseId" name="courseId" >
				<md-option *ngFor="let subject of subjectlist; let i = index" [value]="subject.id">
					{{ subject.subjectName }}
				</md-option>
			</md-select>
			<md-input-container fxFlex="100" >
				<textarea mdInput placeholder="资源描述" [(ngModel)]="model.note" name="note" ></textarea>
			</md-input-container>
			<div fxFlex="100">
				<p>选择文件: {{fileSelectMsg}}</p>
				<p>上传文件: {{fileUploadMsg}}</p>
				<td-file-upload #singleFileUpload (select)="selectEvent($event)" (upload)="uploadEvent($event)" (cancel)="cancelEvent()">
				  <md-icon>file_upload</md-icon><span>{{ singleFileUpload.files?.name }}</span>
				  <ng-template td-file-input-label>
				    <md-icon>attach_file</md-icon><span>选择一个文件...</span>
				  </ng-template>
				</td-file-upload>
			</div>
		
	</form>
</md-dialog-content>
<md-dialog-actions fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="8px">
  
 	<button
    md-button
    color="primary"
    (click)="save()"
    [disabled]="!addForm.form.valid || model.path == '' || model.path == undefined"
    >保存</button>

	<button
	md-button
	color="primary"
	md-dialog-close>关闭</button>
</md-dialog-actions>